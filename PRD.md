You are building a terminal dashboard application called openmetrics using TypeScript and the Ink framework. Ink is a React-based terminal UI library that lets you build CLI apps using React components, created by Vadim Demedes. Reference the project here: https://github.com/vadimdemedes/ink. The application runs on Bun and uses Bun's built in SQLite driver for database access as documented at https://bun.com/docs/runtime/sqlite. The goal of openmetrics is to provide a local, interactive terminal dashboard that reads a SQLite database produced by an OpenCode style chat system and visualizes model usage metrics such as token consumption, sessions, messages, and estimated cost.

The app should behave like a developer focused observability console for LLM usage. It reads an existing SQLite database and computes metrics directly from stored message and session records. The expected schema includes a message table with id, session_id, time_created, time_updated, and a JSON data column, plus a session table with id, project_id, title, directory, time_created, and time_updated. The JSON payload inside message.data contains modelID, providerID, role, and token counters including tokens.input, tokens.output, tokens.cache.read, and tokens.cache.write. All metrics must be derived from these stored values using SQL queries and JSON extraction functions.

The CLI entry point is a command named openmetrics that accepts a required flag pointing to the SQLite database path. On startup, the app validates that the database file exists and that required tables and columns are present. If validation fails, the program should show a clear, user friendly error inside the terminal UI instead of crashing. All database access should use prepared statements and be centralized through a dedicated database module so queries are consistent and maintainable.

Metric computation should include total messages, messages grouped per day, token input and output grouped per model, tokens grouped per day, session counts, messages per session, and top sessions ranked by token usage. The dashboard must also compute estimated cost per model. For pricing and model metadata, use Models.dev as the source of truth instead of hardcoding prices. Models.dev is an open source database of AI model specifications, pricing, and features available at https://models.dev. The full dataset can be fetched from https://models.dev/api.json and queried by Model ID, which matches the identifiers used in message.data.modelID. Provider logos are available from https://models.dev/logos/{provider}.svg and can be used in the UI where appropriate. If pricing data is missing for a model, the UI should show cost as unknown rather than failing.

Cost calculation should be derived from Models.dev pricing fields and computed from aggregated token totals. Convert token counts into million token units and multiply by the corresponding input and output rates returned by the Models.dev dataset. Cache token pricing, if present in the dataset, should be handled separately so later versions of the dashboard can distinguish between base input, cache writes, and cache hits.

The terminal interface should be split into multiple coordinated panels. A top bar shows the application name openmetrics, the active database path, total tokens across all models, and the total estimated cost. A left panel lists all discovered models and shows their aggregated input tokens, output tokens, and estimated cost. A right panel visualizes activity trends with charts. Use ink-table for tabular data and build simple ASCII bar/line charts using Ink's Box and Text components with Unicode block characters. These charts must at minimum show tokens per day and messages per day. A bottom panel presents a session table with session title, message count, tokens used, and last updated time so users can quickly identify heavy usage sessions.

Navigation is fully keyboard driven. The user can quit with q, refresh metrics with r, move selection with arrow keys or j and k, switch focus between panels with tab, and press enter on a model to open a model detail view. The model detail view should show that model's per day token usage, input versus output token ratio, and the top contributing sessions. Refresh should re run queries and recompute metrics without restarting the program. Use Ink's useInput hook for keyboard handling and @inkjs/ui components (Select, Spinner, ProgressBar, Badge) where appropriate.

The codebase should be organized into separate modules for database access, metric aggregation, pricing and cost calculation using Models.dev data, UI rendering with Ink React components, and the CLI entry point. Strong TypeScript types are required for database rows and computed metrics, and JSON extraction must be handled defensively so missing fields default to zero. The final deliverable is a complete Bun project with configuration files, full source, and a README that documents setup, the openmetrics command, database flag usage, Models.dev integration, and keyboard controls. The implementation must include real metric queries and a working interactive TUI, not placeholders.

References (for github links use 'Ref|Context7 MCP tools'):
- https://bun.com/docs/runtime/sqlite
- https://models.dev/
- https://github.com/vadimdemedes/ink
- https://github.com/vadimdemedes/ink-table
- https://github.com/vadimdemedes/ink-ui

Extra Details:
- WE DO NOT NEED OUR OWN DB ALL CALCULATIONS MUST BE REALTIME AND FOR CACHING we store in `.json` instead having a db.
- THE TEST OPENCODE DB is located at `/tmp/tmp.aBmE6o0IEk/opencode.db`
